{% extends "layout.html" %}

{% block content %}
<div class="container">
    <h1 class="text-center titulo">Account Information</h1>
	<div class="content-section">
	  <div class="media">	    
	    <div class="media-body text-center">
	      <h2 class="account-heading"><i class="fas fa-user"></i> {{ current_user.username }}</h2>
	      <h4 class="text-secondary"><i class="fas fa-envelope-square"></i> {{ current_user.email }}</h4>
	      
	      <table class="table table-bordered">
   			<tbody>
   			{% for book in current_user.Book %}
   			<tr>
				<td>{{ book.title }}</td>
				<td>{{ book.author }}</td>
				<td>{{ book.date_posted.strftime('%Y-%m-%d') }}</td>
			</tr>
		    {% endfor %}	
   			</tbody>
	      </table>
	   </div>
	</div>
	<br>
	<form method="POST" action="" enctype="multipart/form-data">
		{{ form.hidden_tag() }}
		<fieldset class="form-group">
			<legend class="border-bottom mb-4">Update Account Info</legend>
			<div class="form-group">
				{{ form.username.label(class="form-control-label") }}

				{% if form.username.errors %}
					{{ form.username(class="form-control form-control-lg is-invalid") }}
					<div class="invalid-feedback">
						{% for error in form.username.errors %}
							<span>{{ error }}</span>
						{% endfor %}
					</div>
				{% else %}
					{{ form.username(class="form-control form-control-lg") }}
				{% endif %}
			</div>
			<div class="form-group">
				{{ form.email.label(class="form-control-label") }}

				{% if form.email.errors %}
					{{ form.email(class="form-control form-control-lg is-invalid") }}
					<div class="invalid-feedback">
						{% for error in form.email.errors %}
							<span>{{ error }}</span>
						{% endfor %}
					</div>
				{% else %}
					{{ form.email(class="form-control form-control-lg") }}
				{% endif %}
			</div>
			<br>
		</fieldset>
		<div class="form-group">
			{{ form.submit(class="btn btn-primary") }}
		</div>
	</form>
    <br>
</div>
<div> 
{% endblock content %}

